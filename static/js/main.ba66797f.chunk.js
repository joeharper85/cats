(this.webpackJsonpcats=this.webpackJsonpcats||[]).push([[0],{159:function(e,t,n){e.exports=n(190)},190:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),u=n.n(c),o=n(30),i=n(56),l=n(143),s=n(106),p=n(10),f=n.n(p),d=n(25),m=n(144),v=n.n(m).a.create({baseURL:"https://api.thecatapi.com/v1",headers:{"x-api-key":"f32a3a1a-4b58-4c1d-972d-68b3d17200eb"}}),h=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/favourites").catch((function(){g("Unable to fetch favourites, refresh page to try again!")}));case 2:(n=e.sent)&&t({type:"FETCH_FAVOURITES",payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e,t){return function(){var n=Object(d.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.post("/votes",{image_id:e,value:t}).catch((function(){a(g("Unable to vote for cat, please try again later!"))}));case 2:n.sent&&a(b());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/votes").catch((function(){t(g("Unable to fetch votes, refresh page to try again!"))}));case 2:(n=e.sent)&&t({type:"FETCH_VOTES",payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){return{type:"SET_ERROR",payload:e}},y=n(205),O=n(146),w=n(208),j=n(108),x=function(e){var t=e.image,n=t.url,a=t.id,c=e.favourite,u=e.votes,i=Object(o.b)();return r.a.createElement(y.a,null,r.a.createElement(O.a,{src:n}),r.a.createElement(y.a.Content,{extra:!0},c?r.a.createElement(w.a,{icon:"heart",color:"purple",onClick:function(){return i(function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.delete("/favourites/".concat(e)).catch((function(){n(g("Unable to unfavourite cat, please try again later!"))}));case 2:t.sent&&n(h());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c.id))}}):r.a.createElement(w.a,{icon:"heart outline",color:"purple",onClick:function(){return i(function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.post("/favourites",{image_id:e}).catch((function(){n(g("Unable to favourite cat, please try again later!"))}));case 2:t.sent&&n(h());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a))}}),r.a.createElement("span",{style:{float:"right"}},r.a.createElement(j.a,null,"Rating: ",function(){var e=0;return u.forEach((function(t){switch(t.value){case 0:e--;break;case 1:e++}})),e}()),r.a.createElement(w.a,{icon:"thumbs up",color:"purple",onClick:function(){return i(E(a,1))}}),r.a.createElement(w.a,{icon:"thumbs down",color:"purple",onClick:function(){return i(E(a,0))}}))))},k=function(e){var t=Object(o.b)();Object(a.useEffect)((function(){(function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/images",{params:{limit:"100"}}).catch((function(){t(g("Unable to fetch cats, refresh page to try again!"))}));case 2:(n=e.sent)&&t({type:"FETCH_CATS",payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(h());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(b());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var n=Object(o.c)((function(e){return e.cats})),c=Object(o.c)((function(e){return e.favourites})),u=Object(o.c)((function(e){return e.votes})),i=function(e){return u.filter((function(t){return t.image_id===e}))};return r.a.createElement("div",null,n.length>0?r.a.createElement(y.a.Group,{itemsPerRow:4,style:{padding:"20px"}},n.map((function(e){return r.a.createElement(x,{key:e.id,image:e,favourite:(t=e.id,c.filter((function(e){return e.image_id===t}))[0]),votes:i(e.id)});var t}))):r.a.createElement("div",null))},C=n(86),T=n(11),R=n(207),S=n(203),U=function(){var e=r.a.useRef(),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],u=n[1],o=function(){var t=Object(d.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",e.current.files[0]),t.next=4,v.post("/images/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(R.a.Header,null,"No cat pictures to hand?"),r.a.createElement("p",null,"You can find AI generated cat pictures here:",r.a.createElement("br",null),r.a.createElement("a",{href:"https://thesecatsdonotexist.com/"},"These cats don't exist"))),r.a.createElement(S.a,{onSubmit:o},r.a.createElement(S.a.Field,null,r.a.createElement(j.a,null,"Upload a cat in .jpg or .png format"),r.a.createElement("input",{type:"file",ref:e,accept:".jpg,.png",onChange:function(e){return e.target.files?u(!0):u(!1)}})),r.a.createElement(w.a,{type:"submit",color:"purple",disabled:!c},"Upload")))},_=n(204),F=n(202),H=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(o.b)(),i=Object(o.c)((function(e){return e.error}));return r.a.createElement("div",null,r.a.createElement(_.a,{fixed:"top",inverted:!0},r.a.createElement(_.a.Item,{header:!0},"Rate My Cat"),r.a.createElement(_.a.Item,{as:C.b,to:"/",name:"list",active:"list"===n,onClick:function(){return c("list")}},"List"),r.a.createElement(_.a.Item,{as:C.b,to:"/upload",name:"upload",active:"upload"===n,onClick:function(){return c("upload")}},"Upload")),r.a.createElement(F.a,{style:{padding:"2rem",marginTop:"4rem"}},i.length>0&&r.a.createElement(R.a,{onDismiss:function(){return u(g(""))},negative:!0,header:"Error!",content:i}),r.a.createElement(T.c,null,r.a.createElement(T.a,{path:"/upload"},r.a.createElement(U,null)),r.a.createElement(T.a,{path:"/"},r.a.createElement(k,null)))))},I=Object(i.c)({cats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATS":return t.payload;default:return e}},favourites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{favourites:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FAVOURITES":return t.payload;default:return e}},votes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{votes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_VOTES":return t.payload;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.payload;default:return e}}}),A=(n(189),Object(i.d)(I,Object(i.a)(l.a)));u.a.render(r.a.createElement(o.a,{store:A},r.a.createElement(C.a,null,r.a.createElement(H,null))),document.querySelector("#root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.ba66797f.chunk.js.map